(this["webpackJsonpschema-collaboration-react"]=this["webpackJsonpschema-collaboration-react"]||[]).push([[0],{145:function(t,e,n){"use strict";function o(t,e){e||(e=window.location.href),t=t.replace(/[[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}function a(t){var e=o("source",window.location);void 0===window.last_saved_schema||t!==window.last_saved_schema?window.confirm("If you continue you will lose the changes in this session")&&(window.location.href=e):window.location.href=e}n.r(e),n.d(e,"getParameterFromUrlByName",(function(){return o})),n.d(e,"onExitApplication",(function(){return a}))},287:function(t,e,n){t.exports=n(288)},288:function(t,e,n){"use strict";n.r(e);n(289),n(290);var o=n(149),a=n.n(o),r=n(654).EditorSchemaCollaborationButtons;console.log(r),a.a.render(a.a.EditorPackage,{descriptor:{},Buttons:r},document.getElementById("root"))},289:function(t,e,n){},342:function(t,e){},344:function(t,e){},371:function(t,e){},373:function(t,e){},453:function(t,e,n){var o={"./geojson.json":221,"./table-schema.json":454,"./topojson.json":222};function a(t){var e=r(t);return n(e)}function r(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}a.keys=function(){return Object.keys(o)},a.resolve=r,t.exports=a,a.id=453},497:function(t,e){},499:function(t,e){},527:function(t,e){},528:function(t,e){},533:function(t,e){},535:function(t,e){},542:function(t,e){},561:function(t,e){},597:function(t,e,n){var o={"./data-package.json":598,"./data-resource.json":599,"./fiscal-data-package.json":600,"./registry.json":601,"./tabular-data-package.json":602,"./tabular-data-resource.json":603};function a(t){var e=r(t);return n(e)}function r(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}a.keys=function(){return Object.keys(o)},a.resolve=r,t.exports=a,a.id=597},654:function(t,e,n){var o=n(33),a=n(0),r=n(0).useEffect,c=n(20).connect,i=n(284).ToastContainer,l=n(655).onSaveToServer,s=n(145).getParameterFromUrlByName,u=n(145).onExitApplication;function d(t){var e=this,n=t.encodedDescriptor,o=t.onUploadChange,c=t.onValidateClick,s=t.onLoadFromServer;return r((function(){return e.loadFromServerButton.click()}),[]),a.createElement("div",null,a.createElement(i,{position:"top-left",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,draggable:!0}),a.createElement("label",{className:"btn btn-lg btn-success",title:"Upload a data package from your local drive",htmlFor:"load-descriptor"},a.createElement("input",{type:"file",id:"load-descriptor",value:"",style:{display:"none"},onChange:o}),"Upload"),a.createElement("button",{className:"btn btn-lg btn-info",title:"Validate the data package verifying its metadata",onClick:c},"Validate"),a.createElement("a",{className:"btn btn-lg btn-success",href:"data: ".concat(n),download:"datapackage.json",title:"Download the data package to your local drive"},"Download"),a.createElement("button",{className:"btn btn-lg btn-info",title:"Save current schema to the server",onClick:function(){return l("".concat(decodeURIComponent(n)))}},"Save to server"),a.createElement("button",{className:"btn btn-lg btn-info",title:"Load from the server",onClick:s,ref:function(t){e.loadFromServerButton=t}},"Load from the server"),a.createElement("button",{className:"btn btn-lg btn-info",title:"Exit package creator",onClick:function(){return u("".concat(decodeURIComponent(n)))}},"Exit package creator"))}var f=c(null,(function(t){return{onUploadChange:function(e){var n=new window.FileReader;n.readAsText(e.target.files[0]),n.onload=function(){t({type:"UPLOAD_PACKAGE",payload:JSON.parse(n.result)})}},onValidateClick:function(){t({type:"VALIDATE_PACKAGE"})},onLoadFromServer:function(){var e=s("load");o.get("/api/datapackage/"+e+"/").then((function(e){t({type:"UPLOAD_PACKAGE",payload:e.data})}))}}}))(d);t.exports={EditorSchemaCollaborationButtons:f,EditorSchemaCollaborationButtonsPure:d}},655:function(t,e,n){"use strict";n.r(e),n.d(e,"onSaveToServer",(function(){return c}));var o=n(33),a=n(284).toast,r=n(145).getParameterFromUrlByName;function c(t){var e=r("load");return o("/api/datapackage/"+e+"/",{method:"PUT",data:t}).then((function(e){return a.info("Saved! UUID: "+e.data.uuid,{className:"toast-info"}),window.last_saved_schema=t,e})).catch((function(t){return t}))}}},[[287,1,2]]]);
//# sourceMappingURL=main.03c9a7c6.chunk.js.map